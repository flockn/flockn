{"version":3,"sources":["src/renderer/dom.js"],"names":[],"mappings":"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","file":"src/renderer/dom.js","sourcesContent":["import Graphics from 'flockn/graphics';\r\nimport createRootElement from 'flockn/graphics/rootelement';\r\nimport * as mouse from 'flockn/input/mouse';\r\n\r\nvar root = window;\r\n\r\nvar pixelize = function(num) {\r\n  return num + 'px';\r\n};\r\n\r\nvar unpixelize = function(str) {\r\n  return parseFloat(str) || 0;\r\n};\r\n\r\nGraphics.renderer = 'DOM';\r\n\r\nvar rootElement = null;\r\n\r\nGraphics.on('initialize', function(Game) {\r\n  rootElement = createRootElement.call(Game, 'div', function(rootElement) {\r\n    rootElement.style.backgroundColor = this.color.toString();\r\n    rootElement.style.overflow = 'hidden';\r\n    rootElement.style.cursor = 'default';\r\n    rootElement.style.userSelect = rootElement.style.mozUserSelect = rootElement.style.webkitUserSelect = 'none';\r\n  });\r\n});\r\n\r\nGraphics.on('add', function(obj) {\r\n  var elementId = obj.id.toLowerCase();\r\n\r\n  // Remove previous elements of the same id\r\n  if (document.getElementById(elementId) != null) {\r\n    (function() {\r\n      var parentId = obj.parent.id.toLowerCase();\r\n\r\n      var parentElem = document.getElementById(parentId);\r\n      parentElem.removeChild(document.getElementById(elementId));\r\n    })();\r\n  }\r\n\r\n  var parent = obj.parent;\r\n\r\n  var parentElem = (function() {\r\n    if ((parent && parent.isRoot) || parent == null) {\r\n      return rootElement;\r\n    } else {\r\n      var parentId = obj.parent.id.toLowerCase();\r\n      var element = document.getElementById(parentId);\r\n      if (element == null) {\r\n        return rootElement;\r\n      } else {\r\n        return element;\r\n      }\r\n    }\r\n  })();\r\n\r\n  var element = document.createElement('div');\r\n  element.id = elementId;\r\n  element.className = [obj.type.toLowerCase(), obj.name.toLowerCase()].join(' ');\r\n  element.style.position = 'absolute';\r\n\r\n  switch (obj.type) {\r\n  case 'Scene':\r\n    element.style.width = pixelize(obj.parent.width);\r\n    element.style.height = pixelize(obj.parent.height);\r\n    break;\r\n  case 'GameObject':\r\n    element.style.left = pixelize(obj.position.x);\r\n    element.style.top = pixelize(obj.position.y);\r\n    element.style.width = pixelize(obj.width);\r\n    element.style.height = pixelize(obj.height);\r\n\r\n    mouse.events.forEach(function(eventName) {\r\n      root.addEventListener(eventName, function(evt) {\r\n        obj.trigger(mouse.relativePosition(evt, rootElement, obj));\r\n      });\r\n    });\r\n\r\n\r\n    // Mouseenter and Mouseleave are kinda special right now\r\n    root.addEventListener('mouseenter', function(evt) {\r\n      obj.trigger('mouseenter', evt);\r\n    }, true);\r\n\r\n    root.addEventListener('mouseleave', function(evt) {\r\n      obj.trigger('mouseleave', evt);\r\n    }, true);\r\n\r\n    break;\r\n  default:\r\n    break;\r\n  }\r\n\r\n  parentElem.appendChild(element);\r\n});\r\n\r\nGraphics.on('texture-image-loaded', function(obj, texture) {\r\n  var element = document.getElementById(obj.id.toLowerCase());\r\n\r\n  if (element != null) {\r\n    element.style.backgroundImage = 'url(' + texture.image.filename + ')';\r\n    element.style.width = pixelize(obj.width);\r\n    element.style.height = pixelize(obj.height);\r\n  }\r\n});\r\n\r\nGraphics.on('texture-label-loaded', function(obj, texture) {\r\n  var element = document.getElementById(obj.id.toLowerCase());\r\n\r\n  if (element != null) {\r\n    element.style.width = pixelize(obj.width);\r\n    element.style.height = pixelize(obj.height);\r\n  }\r\n});\r\n\r\nvar dirtyObjects = {};\r\n\r\nGraphics.after('render', function(obj) {\r\n  var objId = obj.id.toLowerCase();\r\n\r\n  dirtyObjects[objId] = obj;\r\n});\r\n\r\nGraphics.on('render', function(obj) {\r\n  var objId = obj.id.toLowerCase();\r\n\r\n  // Update element attributes\r\n  var element = document.getElementById(objId);\r\n\r\n  if (element != null) {\r\n    var prevObj = dirtyObjects[objId] || {};\r\n\r\n    switch (obj.type) {\r\n    case 'GameObject':\r\n      var elemVisible = element.style.display === 'block';\r\n\r\n      if (elemVisible !== obj.visible) {\r\n        element.style.display = (obj.visible) ? 'block' : 'hidden';\r\n      }\r\n\r\n      if (!elemVisible) {\r\n        return;\r\n      }\r\n\r\n      var elemX = unpixelize(element.style.left);\r\n      var elemY = unpixelize(element.style.top);\r\n      var elemWidth = unpixelize(element.style.width);\r\n      var elemHeight = unpixelize(element.style.height);\r\n\r\n      if (elemX !== obj.position.x) {\r\n        element.style.left = pixelize(obj.position.x);\r\n      }\r\n\r\n      if (elemY !== obj.position.y) {\r\n        element.style.top = pixelize(obj.position.y);\r\n      }\r\n\r\n      if (elemWidth !== obj.width) {\r\n        element.style.width = pixelize(obj.width);\r\n      }\r\n\r\n      if (elemHeight !== obj.height) {\r\n        element.style.height = pixelize(obj.height);\r\n      }\r\n\r\n      if (obj.angle) {\r\n        element.style.transform = element.style.mozTransform = element.style.webkitTransform = 'rotate(' + obj.angle + 'deg)';\r\n      }\r\n\r\n      if (obj.alpha !== 1) {\r\n        element.style.opacity = obj.alpha;\r\n      }\r\n\r\n      // Set background color\r\n      element.style.backgroundColor = obj.texture.backgroundColor.toString();\r\n\r\n      // Set origin\r\n      element.style.transformOrigin = element.style.mozTransformOrigin = element.webkitTransformOrigin = obj.origin.x + 'px ' + obj.origin.y + 'px';\r\n\r\n      // Set border\r\n      if (obj.border.width > 0) {\r\n        element.style.borderWidth = pixelize(obj.border.width);\r\n        element.style.borderStyle = 'solid';\r\n        element.style.borderColor = obj.border.color.toString();\r\n\r\n        if (obj.border.radius > 0) {\r\n          element.style.borderRadius = pixelize(obj.border.radius);\r\n        }\r\n      }\r\n\r\n      if (obj.texture.image.drawable) {\r\n        if (obj.texture.image.offset.x !== 0) {\r\n          element.style.backgroundPositionX = obj.texture.image.offset.x * (-1) + 'px';\r\n        }\r\n\r\n        if (obj.texture.image.offset.y !== 0) {\r\n          element.style.backgroundPositionY = obj.texture.image.offset.y * (-1) + 'px';\r\n        }\r\n      }\r\n\r\n      if (obj.texture.label.drawable) {\r\n        element.innerText = obj.texture.label.text;\r\n\r\n        element.style.whiteSpace = 'nowrap';\r\n\r\n        if (obj.texture.label.font.size) {\r\n          element.style.fontSize = pixelize(obj.texture.label.font.size);\r\n        }\r\n\r\n        if (obj.texture.label.font.color) {\r\n          element.style.color = obj.texture.label.font.color.toString();\r\n        }\r\n\r\n        if (obj.texture.label.font.name) {\r\n          element.style.fontFamily = obj.texture.label.font.name;\r\n        }\r\n\r\n        obj.texture.label.font.decoration.forEach(function(decoration) {\r\n          switch (decoration) {\r\n          case 'bold':\r\n            element.style.fontWeight = 'bold';\r\n            break;\r\n          case 'italic':\r\n            element.style.fontStyle = 'italic';\r\n            break;\r\n          case 'underline':\r\n            element.style.textDecoration = 'underline';\r\n            break;\r\n          default:\r\n            break;\r\n          }\r\n        });\r\n      }\r\n\r\n      break;\r\n    case 'Scene':\r\n      var elemVisibleStyle = element.style.display;\r\n\r\n      if (obj.parent.activeScene !== obj.name) {\r\n        if (elemVisibleStyle !== 'hidden') {\r\n          element.style.display = 'hidden';\r\n        }\r\n      } else {\r\n        if (elemVisibleStyle !== 'block') {\r\n          element.style.display = 'block';\r\n        }\r\n      }\r\n      break;\r\n    default:\r\n      break;\r\n    }\r\n\r\n  }\r\n\r\n});\r\n"]}