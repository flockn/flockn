{"version":3,"sources":["src/mixins/addable.js"],"names":[],"mappings":";;;;;;;;wBAAqB,aAAa;;;;AAElC,IAAI,OAAO,GAAG,SAAS,OAAO,CAAC,OAAO,EAAE,aAAa,EAAE,OAAO,EAAE;;AAE9D,MAAI,KAAK,GAAG,SAAS,KAAK,CAAC,KAAK,EAAW;sCAAN,IAAI;AAAJ,UAAI;;;;;;;AAMvC,QAAI,EAAG,KAAK,YAAY,OAAO,CAAA,AAAC,EAAE;AAChC,UAAI,OAAO,KAAK,KAAK,UAAU,EAAE;AAC/B,cAAM,IAAI,KAAK,CAAC,8BAA8B,CAAC,CAAC;OACjD;;AAED,WAAK,GAAG,IAAI,OAAO,CAAC,KAAK,CAAC,CAAC;KAC5B;;AAED,iBAAa,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;AAC1B,SAAK,CAAC,MAAM,GAAG,IAAI,CAAC;;AAEpB,QAAI,OAAO,EAAE;AACX,aAAO,CAAC,IAAI,CAAC,IAAI,EAAE,KAAK,CAAC,CAAC;KAC3B;;AAED,0BAAS,OAAO,CAAC,KAAK,EAAE,KAAK,CAAC,CAAC;;;AAG/B,QAAI,KAAK,CAAC,KAAK,EAAE;AACf,WAAK,CAAC,KAAK,CAAC,IAAI,CAAC,CAAC;KACnB;;AAED,SAAK,CAAC,OAAO,CAAC,KAAK,EAAE,KAAK,EAAE,IAAI,CAAC,CAAC;GACnC,CAAC;;AAEF,SAAO,YAAW;AAChB,QAAI,IAAI,GAAG,EAAE,CAAC,KAAK,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC;AACpC,QAAI,CAAC,OAAO,CAAC,IAAI,CAAC,CAAC;;AAEnB,WAAO,KAAK,CAAC,IAAI,CAAC,KAAK,CAAC,KAAK,EAAE,IAAI,CAAC,CAAC;GACtC,CAAC;CAEH,CAAC;;qBAEa,OAAO","file":"src/mixins/addable.js","sourcesContent":["import Graphics from '../graphics';\r\n\r\nvar addable = function addable(Factory, groupInstance, extraFn) {\r\n\r\n  var adder = function adder(child, ...args) {\r\n\r\n    // I have decided against letting anything other through than functions and instance references\r\n    // I feel that it more complexity than it tried to solve and I had to handle some edge cases\r\n    // and more thorough type checking\r\n\r\n    if (!( child instanceof Factory)) {\r\n      if (typeof child !== 'function') {\r\n        throw new Error('A child has to be a function');\r\n      }\r\n\r\n      child = new Factory(child);\r\n    }\r\n       \r\n    groupInstance.push(child);\r\n    child.parent = this;\r\n\r\n    if (extraFn) {\r\n      extraFn.call(this, child);\r\n    }\r\n\r\n    Graphics.trigger('add', child);\r\n\r\n    // Only call apply if it's available. Models for example don't have one\r\n    if (child.apply) {\r\n      child.apply(args);\r\n    }\r\n\r\n    child.trigger('add', child, args);\r\n  };\r\n\r\n  return function() {\r\n    var args = [].slice.call(arguments);\r\n    args.unshift(this);\r\n\r\n    return adder.bind.apply(adder, args);\r\n  };\r\n\r\n};\r\n\r\nexport default addable;\r\n"]}