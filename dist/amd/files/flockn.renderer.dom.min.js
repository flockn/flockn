define("flockn/renderer/dom",["exports","flockn/graphics","flockn/graphics/rootelement","flockn/input/mouse"],function(a,b,c,d){"use strict";var e=function(a){return a&&a.__esModule?a["default"]:a},f=e(b),g=e(c),h=d,i=window,j=function(a){return a+"px"},k=function(a){return parseFloat(a)||0};f.renderer="DOM";var l=null;f.on("initialize",function(a){l=g.call(a,"div",function(a){a.style.backgroundColor=this.color.toString(),a.style.overflow="hidden",a.style.cursor="default",a.style.userSelect=a.style.mozUserSelect=a.style.webkitUserSelect="none"})}),f.on("add",function(a){var b=a.id.toLowerCase();null!=document.getElementById(b)&&!function(){var c=a.parent.id.toLowerCase(),d=document.getElementById(c);d.removeChild(document.getElementById(b))}();var c=a.parent,d=function(){if(c&&c.isRoot||null==c)return l;var b=a.parent.id.toLowerCase(),d=document.getElementById(b);return null==d?l:d}(),e=document.createElement("div");switch(e.id=b,e.className=[a.type.toLowerCase(),a.name.toLowerCase()].join(" "),e.style.position="absolute",a.type){case"Scene":e.style.width=j(a.parent.width),e.style.height=j(a.parent.height);break;case"GameObject":e.style.left=j(a.position.x),e.style.top=j(a.position.y),e.style.width=j(a.width),e.style.height=j(a.height),h.events.forEach(function(b){i.addEventListener(b,function(b){a.trigger(h.relativePosition(b,l,a))})}),i.addEventListener("mouseenter",function(b){a.trigger("mouseenter",b)},!0),i.addEventListener("mouseleave",function(b){a.trigger("mouseleave",b)},!0)}d.appendChild(e)}),f.on("texture-image-loaded",function(a,b){var c=document.getElementById(a.id.toLowerCase());null!=c&&(c.style.backgroundImage="url("+b.image.filename+")",c.style.width=j(a.width),c.style.height=j(a.height))}),f.on("texture-label-loaded",function(a){var b=document.getElementById(a.id.toLowerCase());null!=b&&(b.style.width=j(a.width),b.style.height=j(a.height))});var m={};f.after("render",function(a){var b=a.id.toLowerCase();m[b]=a}),f.on("render",function(a){var b=a.id.toLowerCase(),c=document.getElementById(b);if(null!=c){{m[b]||{}}switch(a.type){case"GameObject":var d="block"===c.style.display;if(d!==a.visible&&(c.style.display=a.visible?"block":"hidden"),!d)return;var e=k(c.style.left),f=k(c.style.top),g=k(c.style.width),h=k(c.style.height);e!==a.position.x&&(c.style.left=j(a.position.x)),f!==a.position.y&&(c.style.top=j(a.position.y)),g!==a.width&&(c.style.width=j(a.width)),h!==a.height&&(c.style.height=j(a.height)),a.angle&&(c.style.transform=c.style.mozTransform=c.style.webkitTransform="rotate("+a.angle+"deg)"),1!==a.alpha&&(c.style.opacity=a.alpha),c.style.backgroundColor=a.texture.backgroundColor.toString(),c.style.transformOrigin=c.style.mozTransformOrigin=c.webkitTransformOrigin=a.origin.x+"px "+a.origin.y+"px",a.border.width>0&&(c.style.borderWidth=j(a.border.width),c.style.borderStyle="solid",c.style.borderColor=a.border.color.toString(),a.border.radius>0&&(c.style.borderRadius=j(a.border.radius))),a.texture.image.drawable&&(0!==a.texture.image.offset.x&&(c.style.backgroundPositionX=-1*a.texture.image.offset.x+"px"),0!==a.texture.image.offset.y&&(c.style.backgroundPositionY=-1*a.texture.image.offset.y+"px")),a.texture.label.drawable&&(c.innerText=a.texture.label.text,c.style.whiteSpace="nowrap",a.texture.label.font.size&&(c.style.fontSize=j(a.texture.label.font.size)),a.texture.label.font.color&&(c.style.color=a.texture.label.font.color.toString()),a.texture.label.font.name&&(c.style.fontFamily=a.texture.label.font.name),a.texture.label.font.decoration.forEach(function(a){switch(a){case"bold":c.style.fontWeight="bold";break;case"italic":c.style.fontStyle="italic";break;case"underline":c.style.textDecoration="underline"}}));break;case"Scene":var i=c.style.display;a.parent.activeScene!==a.name?"hidden"!==i&&(c.style.display="hidden"):"block"!==i&&(c.style.display="block")}}})});