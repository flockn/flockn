define("flockn/renderer/dom",["exports","module","../graphics","../graphics/rootelement","../input/mouse"],function(a,b,c,d,e){"use strict";function f(a){return a&&a.__esModule?a["default"]:a}var g=f(c),h=f(d),i=function(){var a=window,b=function(a){return a+"px"},c=function(a){return parseFloat(a)||0};g.renderer="DOM";var d=null;g.on("initialize",function(a){d=h.call(a,"div",function(a){a.style.backgroundColor=this.color.toString(),a.style.overflow="hidden",a.style.cursor="default",a.style.userSelect=a.style.mozUserSelect=a.style.webkitUserSelect="none"})}),g.on("add",function(c){if(c.id){var f=c.id.toLowerCase();null!=document.getElementById(f)&&!function(){var a=c.parent.id.toLowerCase(),b=document.getElementById(a);b.removeChild(document.getElementById(f))}();var g=c.parent,h=function(){if(g&&g.isRoot||null==g)return d;var a=c.parent.id.toLowerCase(),b=document.getElementById(a);return null==b?d:b}(),i=document.createElement("div");switch(i.id=f,i.className=[c.type.toLowerCase(),c.name.toLowerCase()].join(" "),i.style.position="absolute",c.type){case"Scene":i.style.width=b(c.parent.width),i.style.height=b(c.parent.height);break;case"GameObject":i.style.left=b(c.position.x),i.style.top=b(c.position.y),i.style.width=b(c.width),i.style.height=b(c.height),e.events.forEach(function(b){a.addEventListener(b,function(a){c.trigger(e.relativePosition(a,d,c))})}),a.addEventListener("mouseenter",function(a){c.trigger("mouseenter",a)},!0),a.addEventListener("mouseleave",function(a){c.trigger("mouseleave",a)},!0)}h.appendChild(i)}}),g.on("texture-image-loaded",function(a,c){var d=document.getElementById(a.id.toLowerCase());null!=d&&(d.style.backgroundImage="url("+c.image.filename+")",d.style.width=b(a.width),d.style.height=b(a.height))}),g.on("texture-label-loaded",function(a,c){var d=document.getElementById(a.id.toLowerCase());null!=d&&(d.style.width=b(a.width),d.style.height=b(a.height))});var f={};g.after("render",function(a){var b=a.id.toLowerCase();f[b]=a}),g.on("render",function(a){var d=a.id.toLowerCase(),e=document.getElementById(d);if(null!=e){f[d]||{};switch(a.type){case"GameObject":var g="block"===e.style.display;if(g!==a.visible&&(e.style.display=a.visible?"block":"hidden"),!g)return;var h=c(e.style.left),i=c(e.style.top),j=c(e.style.width),k=c(e.style.height);h!==a.position.x&&(e.style.left=b(a.position.x)),i!==a.position.y&&(e.style.top=b(a.position.y)),j!==a.width&&(e.style.width=b(a.width)),k!==a.height&&(e.style.height=b(a.height)),a.angle&&(e.style.transform=e.style.mozTransform=e.style.webkitTransform="rotate("+a.angle+"deg)"),1!==a.alpha&&(e.style.opacity=a.alpha),e.style.backgroundColor=a.texture.backgroundColor.toString(),e.style.transformOrigin=e.style.mozTransformOrigin=e.webkitTransformOrigin=a.origin.x+"px "+a.origin.y+"px",a.border.width>0&&(e.style.borderWidth=b(a.border.width),e.style.borderStyle="solid",e.style.borderColor=a.border.color.toString(),a.border.radius>0&&(e.style.borderRadius=b(a.border.radius))),a.texture.image.drawable&&(0!==a.texture.image.offset.x&&(e.style.backgroundPositionX=-1*a.texture.image.offset.x+"px"),0!==a.texture.image.offset.y&&(e.style.backgroundPositionY=-1*a.texture.image.offset.y+"px")),a.texture.label.drawable&&(e.innerText=a.texture.label.text,e.style.whiteSpace="nowrap",a.texture.label.font.size&&(e.style.fontSize=b(a.texture.label.font.size)),a.texture.label.font.color&&(e.style.color=a.texture.label.font.color.toString()),a.texture.label.font.name&&(e.style.fontFamily=a.texture.label.font.name),a.texture.label.font.decoration.forEach(function(a){switch(a){case"bold":e.style.fontWeight="bold";break;case"italic":e.style.fontStyle="italic";break;case"underline":e.style.textDecoration="underline"}}));break;case"Scene":var l=e.style.display;a.parent.activeScene!==a.name?"hidden"!==l&&(e.style.display="hidden"):"block"!==l&&(e.style.display="block")}}})};b.exports=i});