udefine("flockn/renderer/dom",["root","../graphics","../graphics/rootelement"],function(a,b,c){"use strict";var d=function(a){return a+"px"},e=function(a){return parseFloat(a)||0};b.renderer="DOM";var f=null;return b.on("initialize",function(a){f=c.call(a,"div",function(a){a.style.backgroundColor=this.color,a.style.overflow="hidden"})}),b.on("add",function(b){var c=b.id.toLowerCase();null!=document.getElementById(c)&&!function(){var a=b.parent.id.toLowerCase(),d=document.getElementById(a);d.removeChild(document.getElementId(c))}();var e=b.parent,g=function(){if(e&&e.isRoot||null==e)return f;var a=b.parent.id.toLowerCase(),c=document.getElementById(a);return null==c?f:c}(),h=document.createElement("div");switch(h.id=c,h.className=[b.type.toLowerCase(),b.name.toLowerCase()].join(" "),h.style.position="absolute",b.type){case"Scene":h.style.width=d(b.parent.width),h.style.height=d(b.parent.height);break;case"GameObject":h.style.left=d(b.x),h.style.top=d(b.y),h.style.width=d(b.width),h.style.height=d(b.height),a.addEventListener("click",function(a){b.trigger("click",a)},!0),a.addEventListener("mousedown",function(a){b.trigger("mousedown",a)},!0),a.addEventListener("mouseup",function(a){b.trigger("mouseup",a)},!0),a.addEventListener("mouseenter",function(a){b.trigger("mouseenter",a)},!0),a.addEventListener("mouseleave",function(a){b.trigger("mouseleave",a)},!0),a.addEventListener("mouseover",function(a){b.trigger("mouseover",a)},!0)}g.appendChild(h)}),b.on("texture-image-loaded",function(a,b){var c=document.getElementById(a.id.toLowerCase());null!=c&&(c.style.backgroundImage="url("+b.image.filename+")",c.style.width=d(a.width),c.style.height=d(a.height))}),b.on("render",function(a){var b=document.getElementById(a.id.toLowerCase());if(null!=b)switch(a.type){case"GameObject":var c="block"===b.style.display;if(c!==a.visible&&(b.style.display=a.visible?"block":"hidden"),!c)return;var f=e(b.style.left),g=e(b.style.top),h=e(b.style.width),i=e(b.style.height);f!==a.x&&(b.style.left=d(a.x)),g!==a.y&&(b.style.top=d(a.y)),h!==a.width&&(b.style.width=d(a.width)),i!==a.height&&(b.style.height=d(a.height)),a.angle&&(b.style.transform=b.style.mozTransform=b.style.webkitTransform="rotate("+a.angle+"deg)"),1!==a.alpha&&(b.style.opacity=a.alpha),b.style.backgroundColor=a.texture.color,a.border.width>0&&(b.style.borderWidth=d(a.border.width),b.style.borderStyle="solid",b.style.borderColor=a.border.color,a.border.radius>0&&(b.style.borderRadius=d(a.border.radius))),a.texture.image.filename&&(0!==a.texture.image.offset.x&&(b.style.backgroundPositionX=-1*a.texture.image.offset.x+"px"),0!==a.texture.image.offset.y&&(b.style.backgroundPositionY=-1*a.texture.image.offset.y+"px")),a.texture.label.text&&(b.innerText=a.texture.label.text,a.texture.label.font.size&&(b.style.fontSize=d(a.texture.label.font.size)),a.texture.label.font.color&&(b.style.color=a.texture.label.font.color),a.texture.label.font.name&&(b.style.fontFamily=a.texture.label.font.name));break;case"Scene":var j=b.style.display;a.parent.activeScene!==a.name?"hidden"!==j&&(b.style.display="hidden"):"block"!==j&&(b.style.display="block")}}),b});