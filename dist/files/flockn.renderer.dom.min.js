!function(a){"function"==typeof define&&define.amd?define("flockn/renderer/dom",["exports","flockn/graphics","flockn/graphics/rootelement"],a):"undefined"!=typeof exports&&a(exports,require("flockn/graphics"),require("flockn/graphics/rootelement"))}(function(a,b,c){"use strict";var d=b.default,e=c.default,f=window,g=function(a){return a+"px"},h=function(a){return parseFloat(a)||0};d.renderer="DOM";var i=null;d.on("initialize",function(a){i=e.call(a,"div",function(a){a.style.backgroundColor=this.color.toString(),a.style.overflow="hidden",a.style.cursor="default",a.style.userSelect=a.style.mozUserSelect=a.style.webkitUserSelect="none"})}),d.on("add",function(a){var b=a.id.toLowerCase();null!=document.getElementById(b)&&!function(){var c=a.parent.id.toLowerCase(),d=document.getElementById(c);d.removeChild(document.getElementById(b))}();var c=a.parent,d=function(){if(c&&c.isRoot||null==c)return i;var b=a.parent.id.toLowerCase(),d=document.getElementById(b);return null==d?i:d}(),e=document.createElement("div");switch(e.id=b,e.className=[a.type.toLowerCase(),a.name.toLowerCase()].join(" "),e.style.position="absolute",a.type){case"Scene":e.style.width=g(a.parent.width),e.style.height=g(a.parent.height);break;case"GameObject":e.style.left=g(a.x),e.style.top=g(a.y),e.style.width=g(a.width),e.style.height=g(a.height),f.addEventListener("click",function(b){a.trigger("click",b)},!0),f.addEventListener("mousedown",function(b){a.trigger("mousedown",b)},!0),f.addEventListener("mouseup",function(b){a.trigger("mouseup",b)},!0),f.addEventListener("mouseenter",function(b){a.trigger("mouseenter",b)},!0),f.addEventListener("mouseleave",function(b){a.trigger("mouseleave",b)},!0),f.addEventListener("mouseover",function(b){a.trigger("mouseover",b)},!0)}d.appendChild(e)}),d.on("texture-image-loaded",function(a,b){var c=document.getElementById(a.id.toLowerCase());null!=c&&(c.style.backgroundImage="url("+b.image.filename+")",c.style.width=g(a.width),c.style.height=g(a.height))}),d.on("texture-label-loaded",function(a){var b=document.getElementById(a.id.toLowerCase());null!=b&&(b.style.width=g(a.width),b.style.height=g(a.height))});var j={};d.after("render",function(a){var b=a.id.toLowerCase();j[b]=a}),d.on("render",function(a){var b=a.id.toLowerCase(),c=document.getElementById(b);if(null!=c){{j[b]||{}}switch(a.type){case"GameObject":var d="block"===c.style.display;if(d!==a.visible&&(c.style.display=a.visible?"block":"hidden"),!d)return;var e=h(c.style.left),f=h(c.style.top),i=h(c.style.width),k=h(c.style.height);e!==a.x&&(c.style.left=g(a.x)),f!==a.y&&(c.style.top=g(a.y)),i!==a.width&&(c.style.width=g(a.width)),k!==a.height&&(c.style.height=g(a.height)),a.angle&&(c.style.transform=c.style.mozTransform=c.style.webkitTransform="rotate("+a.angle+"deg)"),1!==a.alpha&&(c.style.opacity=a.alpha),c.style.backgroundColor=a.texture.color.toString(),c.style.transformOrigin=c.style.mozTransformOrigin=c.webkitTransformOrigin=a.origin.x+"px "+a.origin.y+"px",a.border.width>0&&(c.style.borderWidth=g(a.border.width),c.style.borderStyle="solid",c.style.borderColor=a.border.color.toString(),a.border.radius>0&&(c.style.borderRadius=g(a.border.radius))),a.texture.image.drawable&&(0!==a.texture.image.offset.x&&(c.style.backgroundPositionX=-1*a.texture.image.offset.x+"px"),0!==a.texture.image.offset.y&&(c.style.backgroundPositionY=-1*a.texture.image.offset.y+"px")),a.texture.label.drawable&&(c.innerText=a.texture.label.text,c.style.whiteSpace="nowrap",a.texture.label.font.size&&(c.style.fontSize=g(a.texture.label.font.size)),a.texture.label.font.color&&(c.style.color=a.texture.label.font.color.toString()),a.texture.label.font.name&&(c.style.fontFamily=a.texture.label.font.name),a.texture.label.font.decoration.forEach(function(a){switch(a){case"bold":c.style.fontWeight="bold";break;case"italic":c.style.fontStyle="italic";break;case"underline":c.style.textDecoration="underline"}}));break;case"Scene":var l=c.style.display;a.parent.activeScene!==a.name?"hidden"!==l&&(c.style.display="hidden"):"block"!==l&&(c.style.display="block")}}})});