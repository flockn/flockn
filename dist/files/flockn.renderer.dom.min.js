!function(a){"function"==typeof define&&define.amd?define("flockn/renderer/dom",["exports","flockn/graphics","flockn/graphics/rootelement","flockn/input/mouse"],a):"undefined"!=typeof exports&&a(exports,require("flockn/graphics"),require("flockn/graphics/rootelement"),require("flockn/input/mouse"))}(function(a,b,c,d){"use strict";var e=b.default,f=c.default,g=d,h=window,i=function(a){return a+"px"},j=function(a){return parseFloat(a)||0};e.renderer="DOM";var k=null;e.on("initialize",function(a){k=f.call(a,"div",function(a){a.style.backgroundColor=this.color.toString(),a.style.overflow="hidden",a.style.cursor="default",a.style.userSelect=a.style.mozUserSelect=a.style.webkitUserSelect="none"})}),e.on("add",function(a){var b=a.id.toLowerCase();null!=document.getElementById(b)&&!function(){var c=a.parent.id.toLowerCase(),d=document.getElementById(c);d.removeChild(document.getElementById(b))}();var c=a.parent,d=function(){if(c&&c.isRoot||null==c)return k;var b=a.parent.id.toLowerCase(),d=document.getElementById(b);return null==d?k:d}(),e=document.createElement("div");switch(e.id=b,e.className=[a.type.toLowerCase(),a.name.toLowerCase()].join(" "),e.style.position="absolute",a.type){case"Scene":e.style.width=i(a.parent.width),e.style.height=i(a.parent.height);break;case"GameObject":e.style.left=i(a.position.x),e.style.top=i(a.position.y),e.style.width=i(a.width),e.style.height=i(a.height),g.events.forEach(function(b){h.addEventListener(b,function(b){a.trigger(g.relativePosition(b,k,a))})}),h.addEventListener("mouseenter",function(b){a.trigger("mouseenter",b)},!0),h.addEventListener("mouseleave",function(b){a.trigger("mouseleave",b)},!0)}d.appendChild(e)}),e.on("texture-image-loaded",function(a,b){var c=document.getElementById(a.id.toLowerCase());null!=c&&(c.style.backgroundImage="url("+b.image.filename+")",c.style.width=i(a.width),c.style.height=i(a.height))}),e.on("texture-label-loaded",function(a){var b=document.getElementById(a.id.toLowerCase());null!=b&&(b.style.width=i(a.width),b.style.height=i(a.height))});var l={};e.after("render",function(a){var b=a.id.toLowerCase();l[b]=a}),e.on("render",function(a){var b=a.id.toLowerCase(),c=document.getElementById(b);if(null!=c){{l[b]||{}}switch(a.type){case"GameObject":var d="block"===c.style.display;if(d!==a.visible&&(c.style.display=a.visible?"block":"hidden"),!d)return;var e=j(c.style.left),f=j(c.style.top),g=j(c.style.width),h=j(c.style.height);e!==a.position.x&&(c.style.left=i(a.position.x)),f!==a.position.y&&(c.style.top=i(a.position.y)),g!==a.width&&(c.style.width=i(a.width)),h!==a.height&&(c.style.height=i(a.height)),a.angle&&(c.style.transform=c.style.mozTransform=c.style.webkitTransform="rotate("+a.angle+"deg)"),1!==a.alpha&&(c.style.opacity=a.alpha),c.style.backgroundColor=a.texture.backgroundColor.toString(),c.style.transformOrigin=c.style.mozTransformOrigin=c.webkitTransformOrigin=a.origin.x+"px "+a.origin.y+"px",a.border.width>0&&(c.style.borderWidth=i(a.border.width),c.style.borderStyle="solid",c.style.borderColor=a.border.color.toString(),a.border.radius>0&&(c.style.borderRadius=i(a.border.radius))),a.texture.image.drawable&&(0!==a.texture.image.offset.x&&(c.style.backgroundPositionX=-1*a.texture.image.offset.x+"px"),0!==a.texture.image.offset.y&&(c.style.backgroundPositionY=-1*a.texture.image.offset.y+"px")),a.texture.label.drawable&&(c.innerText=a.texture.label.text,c.style.whiteSpace="nowrap",a.texture.label.font.size&&(c.style.fontSize=i(a.texture.label.font.size)),a.texture.label.font.color&&(c.style.color=a.texture.label.font.color.toString()),a.texture.label.font.name&&(c.style.fontFamily=a.texture.label.font.name),a.texture.label.font.decoration.forEach(function(a){switch(a){case"bold":c.style.fontWeight="bold";break;case"italic":c.style.fontStyle="italic";break;case"underline":c.style.textDecoration="underline"}}));break;case"Scene":var k=c.style.display;a.parent.activeScene!==a.name?"hidden"!==k&&(c.style.display="hidden"):"block"!==k&&(c.style.display="block")}}})});