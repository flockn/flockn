define("flockn/renderer/canvas",["exports","flockn/types","flockn/graphics","flockn/graphics/rootelement","flockn/input/mouse"],function(a,b,c,d,e){"use strict";var f=function(a){return a&&a.__esModule?a["default"]:a},g=(b.Vector2,f(c)),h=f(d),i=e;g.renderer="Canvas";var j=null,k=null;g.on("initialize",function(a){j=h.call(a,"canvas",function(b){b.width=a.width,b.height=a.height,k=b.getContext("2d")}),i.events.forEach(function(b){j.addEventListener(b,function(c){a.activeScene&&a.activeScene.children.all(function(a){return a.visible&&a.bounds().contains(i.relativePosition(c,j,a))}).forEach(function(a){return a.trigger(b,i.relativePosition(c,j,a))})})})}),g.before("render",function(a){switch(a.type){case"Game":k.clearRect(0,0,a.width,a.height),k.fillStyle=a.color.toString(),k.fillRect(0,0,a.width,a.height)}}),g.on("render",function(a){switch(a.type){case"GameObject":if(k.save(),k.translate(a.position.x+a.origin.x,a.position.y+a.origin.y),0!==a.angle&&k.rotate(a.angle*(Math.PI/180)),"transparent"!==a.texture.backgroundColor.toString()&&(k.fillStyle=a.texture.backgroundColor.toString(),k.fillRect(-a.origin.x,-a.origin.y,a.width,a.height)),a.texture.image.drawable&&k.drawImage(a.texture.image.data,-a.origin.x,-a.origin.y),a.texture.label.drawable){{a.texture.label.font.size+"px "+a.texture.label.font.name}k.fillStyle=a.texture.label.font.color.toString(),k.fillText(a.texture.label.text,-a.origin.x,-a.origin.y)}k.restore();break;case"Scene":if(a.parent.activeScene!==a.name)return}})});