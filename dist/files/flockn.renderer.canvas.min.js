!function(a){"function"==typeof define&&define.amd?define("flockn/renderer/canvas",["exports","flockn/types","flockn/graphics","flockn/graphics/rootelement"],a):"undefined"!=typeof exports&&a(exports,require("flockn/types"),require("flockn/graphics"),require("flockn/graphics/rootelement"))}(function(a,b,c,d){"use strict";var e=b.Vector2,f=c.default,g=d.default;f.renderer="Canvas";var h=null,i=null;f.on("initialize",function(a){h=g.call(a,"canvas",function(b){b.width=a.width,b.height=a.height,i=b.getContext("2d")}),h.addEventListener("click",function(b){var c=new e(b.pageX-h.offsetLeft,b.pageY-h.offsetTop),d=a.children.byName(a.activeScene);d&&d.children.all(function(a){return a.visible&&a.bounds().contains(c)}).forEach(function(a){return a.trigger("click")})})}),f.before("render",function(a){switch(a.type){case"Game":i.clearRect(0,0,a.width,a.height),i.fillStyle=a.color.toString(),i.fillRect(0,0,a.width,a.height)}}),f.on("render",function(a){switch(a.type){case"GameObject":if(i.save(),i.translate(a.position.x+a.origin.x,a.position.y+a.origin.y),0!==a.angle&&i.rotate(a.angle*(Math.PI/180)),"transparent"!==a.texture.color.toString()&&(i.fillStyle=a.texture.color.toString(),i.fillRect(-a.origin.x,-a.origin.y,a.width,a.height)),a.texture.image.drawable&&i.drawImage(a.texture.image.data,-a.origin.x,-a.origin.y),a.texture.label.drawable){{a.texture.label.font.size+"px "+a.texture.label.font.name}i.fillStyle=a.texture.label.font.color.toString(),i.fillText(a.texture.label.text,-a.origin.x,-a.origin.y)}i.restore();break;case"Scene":if(a.parent.activeScene!==a.name)return}})});