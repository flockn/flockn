udefine("addable",function(){return function(a,b){return function(){var c=arguments[0],d=2<=arguments.length?[].slice.call(arguments,1):[];c instanceof a||("string"==typeof c?Object.hasOwnProperty.call(store,c)&&(c=new a(a.store[c],d)):c=new a(c,d)),b.push(c),c.parent=this}}}),udefine("snowflake/base",["eventmap","mixedice","./group"],function(a,b,c){var d=function(){b([this,d.prototype],new a);{var e=arguments[0];arguments[1]}this.type=e,this.name=this.type+"-"+Date.now(),this.children=new c,this.parent=null,this.trigger("create")};return d}),udefine("snowflake/behavior",["mixedice","./addable","./base","./group"],function(a,b,c){var d=function(){var b=(arguments[0],2<=arguments.length?[].slice.call(arguments,1):[],this);a([this,d.prototype],new c("Behavior")),this.on("update",function(a){b.children.forEach(function(b){b.trigger("update",a)})})};return d.prototype.addBehavior=function(){b(d,this.children).apply(this,arguments)},d.store={},d.define=function(a,b){d.store[a]=b},d}),udefine("snowflake/game",["mixedice","./base"],function(a,b){var c=function(){a([this,c.prototype],new b("Game"))};return c.prototype.add=function(){},c.prototype.show=function(){},c}),udefine("snowflake/gameobject",["mixedice","./addable","./base","./behavior","./group"],function(a,b,c,d,e){var f=function(){a([this,f.prototype],new c);var b=this;this.x=0,this.y=0,this.parent=null,this.behaviors=new e,this.models=new e,this.on("render",function(){b.children.forEach(function(a){a.trigger("render")})}),this.on("update",function(){b.children.forEach(function(a){a.trigger("update")}),b.behaviors.forEach(function(a){a.trigger("update")})})};return f.store={},f.define=function(a,b){f.store[a]=b},f.prototype.addGameObject=function(){b(f,this.children).apply(this,arguments)},f.prototype.addBehavior=function(){b(d,this.behaviors).apply(this,arguments)},f}),udefine("snowflake/group",[],function(){var a="untitled",b=0,c=function(){this.length=0,this.tags={},this.names={}};return c.prototype.push=function(c,d){var e=c.name||a+b++;return null==d&&(d=c.tags||[]),Object.hasOwnProperty.call(this.names,e)?void 0:(this[this.length]=c,this.tags.forEach(function(a){this.tags[a]=this.tags[a]||[],this.tags[a].push(this.length)},this),this.names[e]=this.length,++this.length)},c.prototype.pop=function(){return this[this.length]},c.prototype.splice=function(){},c.prototype.slice=function(a,b){null==b&&(b=this.length);for(var d=new c,e=a;b>e;e++)d.push(this[e]);return d},c.prototype.forEach=function(a){for(var b=0;b<this.length;b++)a(this[b])},c.prototype.filter=function(a){for(var b=[],c=0;c<this.length;c++)a(this[c])&&b.push(this[c]);return b},c.prototype.byName=function(a){return this[this.names[a]]},c.prototype.byTag=function(a){return this.tags[a].map(function(a){return this[a]},this)},c}),udefine("snowflake/scene",["mixedice","./addable","./base","./group","./gameobject"],function(a,b,c){var d=function(){a([this,d.prototype],new c("Scene"))};d.prototype.addGameObject=function(){b(d,this.children).apply(this,arguments)},d.store={},d.define=function(a,b){d.store[a]=b}});